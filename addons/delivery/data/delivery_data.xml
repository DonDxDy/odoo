<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!--Email template -->
        <record id="delivery_template_confirmation_mail" model="mail.template">
            <field name="name">Delivery Confirmation - Send by Email</field>
            <field name="subject">${object.company_id.name} ${object.state in ('done') and 'Quotation' or 'Order'} (Ref ${object.name or 'n/a' })</field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="model_id" ref="delivery.model_stock_picking"/>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html"><![CDATA[
                <div valign="center" style="font-size: 12px;border-bottom:1px solid #DDD;margin-bottom:20px;">
                    <img src="/logo.png" style="margin: 0px; height: auto; width: 80px;" alt="${user.company_id.name}">
                </div>
                <div valign="center">
                    <p style="margin-bottom:10px;font-size:15px;">Dear ${object.partner_id.name},</p>
                    <p style="text-indent:50px;margin-bottom:20px;font-size:15px;">
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        Thank you for your order. We are glad to inform you that the items in this email have been shipped to the following address :</p>
                </div>
                <div valign="center">
                    <p valign="center" style="margin-top:10px;font-size:15px;">${object.partner_id.name}</p>
                    <p valign="center" style="font-size:15px;"> ${object.partner_id.street}</p>
                    <p valign="center" style="font-size:15px;"> ${object.partner_id.city} ${object.partner_id.state_id.name} ${object.partner_id.zip} </p>
                    <p valign="center" style="margin-bottom: 20px; font-size:15px;"> ${object.partner_id.country_id.name}</p>
                </div>
                <div valign="center" style="margin-bottom: 10px;">
                    <strong>Order summary :</strong>
                </div>
                <table width="30%" valign="center">
                    <thead>
                        <tr>
                            <th style="text-align:left;">
                                <strong>Product</strong>
                            </th>
                            <th style="text-align:right;">
                                <strong>Delivered Qty</strong>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        % for pack_operation in object.pack_operation_ids:
                            <tr>
                                <td style="text-align:left;">
                                    ${pack_operation.product_id.name}
                                </td>
                                <td style="text-align:right;">
                                    ${pack_operation.qty_done}
                                    ${pack_operation.product_uom_id.name}
                                </td>
                            </tr>
                        %endfor
                    </tbody>
                </table>
            </div>
            <div valign="center" style="margin-top: 20px; margin-bottom: 20px; font-size:15px;">
                %if object.carrier_tracking_url:
                    Click here to track your delivery :
                    <a href="${object.carrier_tracking_url}" target="_blank">
                        ${object.carrier_tracking_ref}
                    </a>
                %endif
            </div>
            <p valign="center" style="font-size:15px;">Thank you,</p>
            ]]></field>
        </record>

        <record id="free_delivery_carrier" model="delivery.carrier">
            <field name="name">Free delivery charges</field>
            <field name="fixed_price">0</field>
            <field name="free_if_more_than" eval="True"/>
            <field name="amount">1000</field>
            <field name="sequence">1</field>
            <field name="delivery_type">fixed</field>
            <field name="product_type">service</field>
            <field name="product_sale_ok" eval="False"/>
        </record>

        <record forcecreate="True" id="property_delivery_carrier" model="ir.property">
            <field name="name">property_delivery_carrier_id</field>
            <field name="fields_id" search="[('model','=','res.partner'),('name','=','property_delivery_carrier_id')]"/>
        </record>
    </data>
</odoo>
