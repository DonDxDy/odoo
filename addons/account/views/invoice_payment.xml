<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="online_invoice_assets" name="Online Invoice Results assets">
        <script src="/web/static/lib/nvd3/d3.v3.js"></script>
        <script src="/web/static/lib/nvd3/nv.d3.js"></script>
        <script type="text/javascript" src="/web/static/src/js/services/session.js"></script>
        <link href="/web/static/lib/nvd3/nv.d3.css" rel="stylesheet" type="text/css"></link>
        <link rel="stylesheet" type="text/less" href="/web/static/src/less/import_bootstrap.less"/>
        <link rel="stylesheet" type="text/less" href="/web/static/src/less/fonts.less" />
        <link rel="stylesheet" type="text/less" href="/web/static/src/less/utils.less"/>
    </template>

    <!-- Forbidden error messages-->
    <template id="403">
        <t t-call="account.layout">
            <div id="wrap">
                <div class="container">
                    <h1 class="mt32">403: Forbidden</h1>
                    <p>The page you were looking for could not be authorized.</p>
                    <p>Maybe you were looking for this popular page ?</p>
                    <li><a href="#">Home</a></li>
                </div>
            </div>
        </t>
    </template>

    <!-- new layout for online payment -->
    <template id="layout" name="Online Payment Layout">&lt;!DOCTYPE html&gt;
        <html>
            <head>
                <meta charset="utf-8" />
                <meta name="viewport" content="initial-scale=1"/>
                <title><t t-esc="title or 'Odoo Online Payment'"/></title>
                <t t-call-assets="web.assets_common"/>
                <t t-call-assets="account.online_invoice_assets"/>
            </head>
            <body>
                <header>
                    <div id="wrapwrap"></div>
                    <div><title>Odoo</title></div>
                </header>
                <main>
                    <t t-raw="0"/>
                </main>
            </body>
            <footer>
                <div class="container mt16 mb8">
                    <div class="pull-right" t-ignore="true" t-if="not editable"> Powered by <a href="http://www.odoo.com">Odoo</a>
                        <div>Bill and get paid online for free</div>
                    </div>
                </div>
            </footer>
        </html>
    </template>

    <template id="invoice_payment_detail" name="Payment Detail">
        <div id="wrap">
            <div t-att-class="payment_request.state == 'paid' and 'panel panel-success' or 'panel panel-default'">
                <t t-if="payment_request.state == 'paid'">
                    <div class="panel-heading">
                        <div t-attf-class="alert alert-#{status}" t-raw="message"/>
                    </div>
                </t>
                <div class="panel-body">
                    <div class="row">
                        <label class="col-md-2 col-sm-4 col-xs-4 text-right">Customer:</label>
                        <div class="col-md-5 col-sm-8 col-xs-8">
                            <div t-field="payment_request.partner_id"/>
                        </div>
                        <label class="col-md-2 col-sm-4 col-xs-4">Invoice Date:</label>
                        <div class="col-md-2 col-sm-8 col-xs-8">
                            <div t-field="payment_request.invoice_id.date_invoice"/>
                        </div>
                    </div>
                    <div class="row">
                        <label class="col-md-2 col-sm-4 col-xs-4 text-right">Bill To:</label>
                        <div class="col-sm-8 col-xs-8">
                            <div t-field="payment_request.partner_id" t-options='{
                                "widget": "contact",
                                "fields": ["address", "name", "phone", "email"]
                            }'/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                          <strong>Product</strong>
                        </div>
                        <div class="hidden-sm hidden-xs col-md-2 text-right">
                          <strong>Unit Price</strong>
                        </div>
                        <div class="hidden-sm hidden-xs col-md-2 text-right">
                          <strong>Quantity</strong>
                        </div>
                        <div class="hidden-sm hidden-xs col-md-2 text-right">
                          <strong>Subtotal</strong>
                        </div>
                    </div>
                    <t t-foreach="payment_request.invoice_id.invoice_line_ids" t-as="invoice_line">
                        <div class="row orders_vertical_align">
                            <div class="visible-lg col-lg-1 text-center">
                                <span t-field="invoice_line.product_id.image" t-options="{'widget': 'image', 'class': 'img-rounded', 'style':'width: 48px;height:48px'}" />
                            </div>
                            <div id='product_name' class="col-lg-4 col-sm-6 col-xs-4">
                                <span t-esc="invoice_line.product_id.name"/>
                            </div>
                            <div class="col-xs-3 text-right">
                                <span t-field="invoice_line.price_unit" t-options='{"widget": "monetary", "display_currency": payment_request.currency_id}'/>
                            </div>
                            <div class="col-xs-2 text-right">
                                <span t-esc="invoice_line.quantity"/>
                            </div>
                            <div class="col-sm-2 col-xs-3 text-right">
                                <span t-field="invoice_line.price_subtotal" t-options='{"widget": "monetary", "display_currency": payment_request.currency_id}'/>
                            </div>
                        </div>
                    </t>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                          <div>
                            <strong>Contact</strong>
                          </div>
                          <div t-field="payment_request.invoice_id.user_id.partner_id" t-options='{"widget": "contact", "fields": ["email", "phone"]}'/>
                          <br/>
                        </div>
                        <div class="col-md-6">
                          <div class="row">
                            <div class="col-md-9 col-xs-8 text-right">
                              Untaxed Amount:
                            </div>
                            <div class="col-md-3 col-xs-4 text-right">
                              <span t-field="payment_request.invoice_id.amount_untaxed" t-options='{"widget": "monetary", "display_currency": payment_request.currency_id}'/>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-9 col-xs-8 text-right">
                              Taxes:
                            </div>
                            <div class="col-md-3 col-xs-4 text-right">
                              <span t-field="payment_request.invoice_id.amount_tax" t-options='{"widget": "monetary", "display_currency": payment_request.currency_id}'/>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-9 col-xs-8 text-right">
                              <strong>Total:</strong>
                            </div>
                            <div class="col-md-3 col-xs-4 text-right">
                              <strong><span t-field="payment_request.invoice_id.amount_total" t-options='{"widget": "monetary", "display_currency": payment_request.currency_id}'/></strong>
                            </div>
                          </div>
                          <hr/>
                          <div class="row">
                            <div class="col-md-9 col-xs-8 text-right">
                              <strong>Amount Due:</strong>
                            </div>
                            <div class="col-md-3 col-xs-4 text-right">
                              <strong><span t-field="payment_request.invoice_id.residual" t-options='{"widget": "monetary", "display_currency": payment_request.currency_id}'/></strong>
                            </div>
                          </div>
                        </div>
                      </div>
                </div>
            </div>
        </div>
    </template>

    <template id="invoice_pay" name="Payment">
        <t t-call="account.layout">
            <div id="wrap">
                <div class="container o_invoice_payment mt16">
                    <div class="oe_structure"/>
                    <div class="container mt16">
                        <div id="introduction" class="page-header mt16">
                                <span style="float:left;margin-right:15px;width: 18em;" t-field="payment_request.company_id.logo" t-options="{'widget': 'image'}" t-att-alt="'Logo of %s' % payment_request.company_id.name" t-att-title="payment_request.company_id.name"/>
                            <div>
                                <h3 style="float:left;margin-right:21%;margin-top:11px">
                                    Your Invoice<br></br>
                                    <em t-esc="payment_request.reference"/>
                                    <small t-field="payment_request.state"/>
                                </h3>
                                <div class="text-left">
                                <h2>
                                    <span t-esc="payment_request.invoiced_amount" t-options="{'widget': 'monetary', 'display_currency': payment_request.currency_id}"/>
                                </h2>
                                <strong>Due by <span class="ml16" t-esc="payment_request.due_date" t-options='{"widget": "date"}'/></strong>
                                <span style="padding-top: 40px;border-left: 1px solid grey;margin-left: 5%;"/>
                                </div>
                                <div t-ignore="true" style="margin-top: -50px;padding-left: 80%;">
                                    <ul class="list-inline">
                                        <li>
                                            <a target="_blank" style="font-size:" t-att-href="'/invoice/payment/%s' % payment_request.access_token+'?pdf=True'" t-att-title="payment_request.reference">
                                                <i class="fa fa-download fa-2x" aria-hidden="true"/>
                                            </a>
                                        </li>
                                        <li>
                                            <a target="_blank"  t-att-href="'/invoice/payment/%s' % payment_request.access_token+'?pdf=True'" t-att-title="payment_request.reference">
                                                <i class="fa fa-print fa-2x" aria-hidden="true"/>
                                            </a>
                                        </li>
                                        <li>
                                            <t t-if="payment_request.state != 'paid'">
                                                <a class="btn btn-primary btn-lg"  data-toggle="modal" data-target="#modalpayment">
                                                    <i class="fa fa-arrow fa-5x" aria-hidden="true"/>Pay Now
                                                </a>
                                            </t>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="row mt32">
                            <div class="col-md-8 col-xs-8">
                                <t t-call="account.invoice_payment_detail"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>
