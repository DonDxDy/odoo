<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="quiz_content" name="Lesson: Quiz specific content">
        <t t-set="quiz_completed" t-value="quiz_completed or False"/>
        <t t-set="is_quiz_manager" t-value="is_quiz_manager or False"/>

        <div class="o_quiz_js_quiz col" id="lessonQuiz"
            t-att-data-id="object.id"
            t-att-data-name="object.name"
            t-att-data-model="model"
            t-att-data-completed="1 if quiz_completed else 0"
            t-att-data-quiz-attempts-count="quiz_attempts_count"
            t-att-data-quiz-points-gained="points_gained">
            <t t-foreach="object.question_ids" t-as="question">
                <t t-call="gamification_quiz.quiz_question"/>
            </t>
            <!-- <t t-if="slide.channel_id.can_upload" t-call="website_slides.lesson_content_quiz_add_buttons"/> -->
            <div class="o_quiz_js_quiz_validation pt-3"/>
        </div>
    </template>

    <template id="quiz_question" name="Lesson: Quiz question template">
        <div t-att-class="'o_quiz_js_quiz_question mt-3 %s' % ('completed-disabled' if quiz_completed else '')"
            t-att-data-question-id="question['id']" t-att-data-title="question['question']" >
            <div class="row d-flex mb-2 mx-0">
                <div class="h4">
                    <small class="text-muted">
                        <i class="o_quiz_js_quiz_icon o_quiz_js_quiz_sequence_handler fa fa-bars mr-1 text-muted" t-if="is_quiz_manager and not quiz_completed"/>
                        <t t-if="question_index != NoneType"><span class="o_quiz_quiz_question_sequence" t-esc="question_index+1"/>.</t>
                        <t t-else=""><span class="o_quiz_question_sequence" t-esc="question['sequence']"/>.</t>
                    </small>
                    <span t-esc="question['question']"/>
                </div>
                <div class="ml-auto o_quiz_js_quiz_edit_del" t-if="is_quiz_manager and not quiz_completed" >
                    <i class="o_quiz_js_quiz_icon o_quiz_js_quiz_edit_question fa fa-pencil-square-o p-1 text-muted"></i>
                    <i class="o_quiz_js_quiz_icon o_quiz_js_quiz_delete_question fa fa-trash p-1 text-muted"></i>
                </div>
            </div>
            <div class="list-group">
                <t t-foreach="question['answer_ids']" t-as="answer">
                    <a t-att-data-answer-id="answer['id']" href="#"
                        t-att-data-text="answer['text_value']" t-att-data-is-correct="answer['is_correct']" t-att-data-comment="answer['comment']"
                        t-att-class="'o_quiz_quiz_answer list-group-item list-group-item-action d-flex align-items-center %s' % ('list-group-item-success' if slid_completed and answer['is_correct'] else '')">
                        <label class="my-0 d-flex align-items-center justify-content-center mr-2">
                            <input type="radio"
                                t-att-name="question['id']"
                                t-att-value="answer['id']"
                                class="d-none"
                                t-att-disabled="quiz_completed"/>
                            <i t-att-class="'fa fa-circle text-400 %s' % ('d-none' if quiz_completed and answer['is_correct'] else '')"/>
                            <i class="fa fa-times-circle text-danger d-none"></i>
                            <i t-att-class="'fa fa-check-circle text-success %s' % ('d-none' if not (quiz_completed and answer['is_correct']) else '')"></i>
                        </label>
                        <span t-esc="answer['text_value']"/>
                    </a>
                </t>
                <div class="o_quiz_quiz_answer_info list-group-item list-group-item-info d-none">
                    <i class="fa fa-info-circle"/>
                    <span class="o_quiz_quiz_answer_comment"/>
                </div>
            </div>
        </div>
    </template>
</odoo>