<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.Attachment" owl="1">
        <div class="o-Attachment"
            t-att-class="{
                'o-hasCardDetails': detailsMode === 'card',
                'o-isDownloadable': isDownloadable,
                'o-isEditable': isEditable,
                'o-isUploading': attachment and attachment.$$$isUploading(mself),
                'o-isViewable': attachment and attachment.$$$isViewable(mself),
            }" t-att-title="attachment ? attachment.$$$displayName(mself) : undefined" t-att-data-attachment-local-id="attachment ? attachment.localId : undefined"
        >
            <t t-if="attachment">
                <!-- Image style-->
                <!-- o_image from mimetype.scss -->
                <div class="o-Attachment-image o_image" t-on-click="_onClickImage"
                    t-att-class="{
                        'o-hasDetailsOverlay': detailsMode !== 'card',
                        'o-isAttachmentViewable': attachment.$$$isViewable(mself),
                        'o-isLarge': imageSize === 'large',
                        'o-isMedium': imageSize === 'medium',
                        'o-isSmall': imageSize === 'small',
                    }" t-att-href="attachmentUrl" t-att-style="imageStyle" t-att-data-mimetype="attachment.$$$mimetype(mself)"
                >
                    <t t-if="(showFilename or showExtension) and detailsMode === 'hover'">
                        <div class="o-Attachment-imageOverlay">
                            <div class="o-Attachment-details o-Attachment-imageOverlayDetails">
                                <t t-if="showFilename">
                                    <div class="o-Attachment-filename">
                                        <t t-esc="attachment.$$$displayName(mself)"/>
                                    </div>
                                </t>
                                <t t-if="showExtension">
                                    <div class="o-Attachment-extension">
                                        <t t-esc="attachment.$$$extension(mself)"/>
                                    </div>
                                </t>
                            </div>
                            <div class="o-Attachment-actions">
                                <!-- Remove button -->
                                <t t-if="isEditable" t-key="'unlink'">
                                    <div class="o-Attachment-action o-Attachment-actionUnlink"
                                        t-att-class="{
                                            'o-isPretty': attachment.$$$isLinkedToComposer(mself),
                                        }" t-on-click="_onClickUnlink" title="Remove"
                                    >
                                        <i class="fa fa-times"/>
                                    </div>
                                </t>
                                <!-- Download button -->
                                <t t-if="isDownloadable and !attachment.$$$isTemporary(mself)" t-key="'download'">
                                    <div class="o-Attachment-action o-Attachment-actionDownload" t-on-click="_onClickDownload" title="Download">
                                        <i class="fa fa-download"/>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </t>
                </div>
                <!-- Attachment details -->
                <t t-if="(showFilename or showExtension) and detailsMode === 'card'">
                    <div class="o-Attachment-details">
                        <t t-if="showFilename">
                            <div class="o-Attachment-filename">
                                <t t-esc="attachment.$$$displayName(mself)"/>
                            </div>
                        </t>
                        <t t-if="showExtension">
                            <div class="o-Attachment-extension">
                                <t t-esc="attachment.$$$extension(mself)"/>
                            </div>
                        </t>
                    </div>
                </t>
                <!-- Attachment aside -->
                <t t-if="detailsMode !== 'hover' and (isDownloadable or isEditable)">
                    <div class="o-Attachment-aside" t-att-class="{ 'o-hasMultipleAction': isDownloadable and isEditable }">
                        <!-- Uploading icon -->
                        <t t-if="attachment.$$$isUploading(mself) and attachment.$$$isLinkedToComposer(mself)">
                            <div class="o-Attachment-asideItem o-Attachment-asideItemUploading" title="Uploading">
                                <i class="fa fa-spin fa-spinner"/>
                            </div>
                        </t>
                        <!-- Uploaded icon -->
                        <t t-if="!attachment.$$$isUploading(mself) and attachment.$$$isLinkedToComposer(mself)">
                            <div class="o-Attachment-asideItem o-Attachment-asideItemUploaded" title="Uploaded">
                                <i class="fa fa-check"/>
                            </div>
                        </t>
                        <!-- Remove button -->
                        <t t-if="isEditable">
                            <div class="o-Attachment-asideItem o-Attachment-asideItemUnlink" t-att-class="{ 'o-isPretty': attachment.$$$isLinkedToComposer(mself) }" t-on-click="_onClickUnlink" title="Remove">
                                <i class="fa fa-times"/>
                            </div>
                        </t>
                        <!-- Download button -->
                        <t t-if="isDownloadable and !attachment.$$$isTemporary(mself)">
                            <div class="o-Attachment-asideItem o-Attachment-asideItemDownload" t-on-click="_onClickDownload" title="Download">
                                <i class="fa fa-download"/>
                            </div>
                        </t>
                    </div>
                </t>
                <t t-if="state.hasDeleteConfirmDialog">
                    <AttachmentDeleteConfirmDialog
                        attachment="attachment"
                        t-on-dialog-closed="_onDeleteConfirmDialogClosed"
                    />
                </t>
            </t>
        </div>
    </t>

</templates>
