<odoo>
  <data>

    <record model="ir.actions.act_window" id="action_event_stand_open">
        <field name="res_model">event_stand.stand</field>
        <field name="name">Event Stands</field>
        <field name="view_type">form</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'search_default_event_id': active_id, 'default_event_id': active_id, 'group_by': 'state'}</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to add a stand.
            </p>
        </field>
    </record>

    <!-- Events Organisation/CONFIGURATION/EVENTS -->
    <record id="view_event_exhibitors_form" model="ir.ui.view">
        <field name="name">Event Exhibitors</field>
        <field name="inherit_id" ref="website_event.event_event_view_form_inherit_website"/>
        <field name="model">event.event</field>
        <field name="arch" type="xml">
            <button name="website_publish_button" position="before">
                <button name="%(action_event_stand_open)d"
                        type="action" attrs="{'invisible': [('website_exhibitors', '=', False)]}"
                        class="oe_stat_button"
                        icon="fa-bank">
                    <div class="o_field_widget o_stat_info">
                        <span class="o_stat_value" style="display: inline-block;"><field name="stand_sold_count"/> / <field name="stand_count"/></span> stands<br/>
                        <span class="o_stat_value" style="display: inline-block;"><field name="slot_sold_count"/> / <field name="slot_count"/></span> slots
                    </div>
                </button>
            </button>
            <label for="website_menu" position="after">
                <field name="website_exhibitors" attrs="{'invisible': [('website_menu', '=', False)]}"/>
                <label for="website_exhibitors" string="Exhibitors" attrs="{'invisible': [('website_menu', '=', False)]}"/>
            </label>
            <notebook position="inside">
                <page string="Map" attrs="{'invisible': [('website_menu', '=', False)]}">
                    <group>
                        <field name="exhibition_map"/>
                    </group>
                </page>
            </notebook>
        </field>
    </record>


    <!-- Stands View -->
    <record id="stand_search" model="ir.ui.view">
        <field name="name">event_stand.stand.search</field>
        <field name="model">event_stand.stand</field>
        <field name="arch" type="xml">
            <search string="Search Stands">
                <field name="name"/>
                <field name="event_id"/>
           </search>
        </field>
    </record>

    <record model="ir.ui.view" id="event_stand.list">
      <field name="name">Event Stands</field>
      <field name="model">event_stand.stand</field>
      <field name="arch" type="xml">
          <tree string="Stands">
              <field name="name"/>
              <field name="type_id"/>
              <field name="state"/>
          </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="event_stand.form">
      <field name="name">Event Stands Form</field>
      <field name="model">event_stand.stand</field>
      <field name="arch" type="xml">
          <form string="Stands">
                <header>
                    <field name="state" widget="statusbar" clickable="True"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="e.g. B24"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                        </group>
                        <group>
                            <field name="event_id"/>
                            <field name="type_id" domain="[('event_id','=',event_id)]"/>
                        </group>
                    </group>
                    <separator string="Slots"/>
                    <field name="slot_ids">
                        <tree string="Slots" editable="bottom">
                            <field name="name" placeholder="e.g. Wed 9am-1pm"/>
                            <field name="subject"/>
                            <field name="state"/>
                        </tree>
                    </field>
                </sheet>
          </form>
      </field>
    </record>

    <!-- Stand Type View -->

    <record model="ir.ui.view" id="event_stand.stand_type_tree">
      <field name="name">Event Stands Type tree</field>
      <field name="model">event_stand.stand.type</field>
      <field name="arch" type="xml">
          <tree string="Stand Type">
              <field name="sequence" widget="handle"/>
              <field name="name"/>
              <field name="event_id"/>
              <field name="price"/>
          </tree>
      </field>
    </record>


    <record model="ir.ui.view" id="event_stand.stand_type_form">
      <field name="name">Event Stands Type Form</field>
      <field name="model">event_stand.stand.type</field>
      <field name="arch" type="xml">
          <form string="Stand Type">
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="e.g. VIP"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="event_id"/>
                            <field name="product_id"/>
                            <field name="price" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                            <field name="price_upsell" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                            <field name="company_id"/>
                            <field name="currency_id" invisible="1"/>
                        </group>
                        <group>
                            <field name="main"/>
                            <field name="photo"/>
                        </group>
                    </group>
                    <separator string="Public Description"/>
                    <field name="description"/>
                </sheet>
          </form>
      </field>
    </record>

    <record id="stand_search" model="ir.ui.view">
        <field name="name">event_stand.stand.search</field>
        <field name="model">event_stand.stand</field>
        <field name="arch" type="xml">
            <search string="Search Stands">
                <field name="name" filter_domain="['|','|',('name','ilike',self),('partner_name','ilike',self),('partner_company','ilike',self)]"/>
                <field name="event_id"/>
           </search>
        </field>
    </record>

    <!-- Top menu item -->

    <record model="ir.actions.act_window" id="action_event_stand_type_list">
        <field name="res_model">event_stand.stand.type</field>
        <field name="name">Stand Types</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Click to add a stand type.
            </p>
        </field>
    </record>
    <menuitem id="event_stand.action_event_stand_type_open" parent="event.menu_event_configuration"
              action="event_stand.action_event_stand_type_list"/>

  </data>
</odoo>
