// ------------------------------------------------------------------
// Base layout, including mobile behavior
// ------------------------------------------------------------------
// Variables
@navbar-height: 40px;
@navbar-margin-bottom: 0;
@z-index-o-control-panel-second-row: 1;
@z-index-o-application-switcher: 2;

// Rules
html {
    height: 100%;

    body {
        height: 100%;

        .o-application-switcher {
            z-index: @z-index-o-application-switcher + 1;
            position: absolute;
            top: @navbar-height + 1;  // Idiotic solution: when the navbar contains too many items the layout is fucked
            right: 0;
            bottom: 0;
            left: 0;
            background-color: @gray;
            background-size:100%;
            padding-top: 15px;
        }

        .o-web-client {
            height: 100%;
            padding-top: @navbar-height + 2;
            .o-flex-display();
            .o-flex-direction(column);
            @media (max-width: @grid-float-breakpoint) {
                overflow-x: auto;  // horizontal scrollbar if necessary
                height: auto;  // reset height inheritance
            }

            .o-control-panel-first-row {
                .o-flex(0, 0, auto);
            }

            .o-control-panel-second-row {
                .o-flex(0, 0, auto);
            }

            .o-content {
                .o-flex(1, 1, auto);
                overflow: auto;
                height: 100%;
                position: relative;  // Allow to redistribute the 100% height to its child
                @media (max-width: @grid-float-breakpoint) {
                    position: static;  // reset the height 100% distribution on flex item
                }

                .o-view-manager-content {
                    position: absolute;  // Get the 100% height of its flex parent
                    top: 0;
                    right: 0;
                    bottom: 0;
                    left: 0;
                    height: 100%;
                    @media (max-width: @grid-float-breakpoint) {
                        position: static;  // reset the height 100% distribution on flex item
                        height: auto;  // reset height inheritance
                    }
                }
            }

            .o-debug-manager {
                .o-flex(0, 0, auto);
            }
        }

        .o-loading {
            position: absolute;
            bottom: 0;
            right: 0;
        }
    }
}
