<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Assets for reports -->

    <template id="report_assets_common">
        <t t-call="web._assets_helpers">
            <!-- FIXME web_editor ? -->
            <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/bootstrap_overridden.scss"/>
        </t>

        <t t-call="web._assets_bootstrap"/>

        <link href="/base/static/src/css/description.css" rel="stylesheet" type="text/css"/>

        <!-- FIXME web_editor ? -->
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/web_editor.common.scss"/>

        <link href="/web/static/lib/fontawesome/css/font-awesome.css" rel="stylesheet" type="text/css"/>

        <link rel="stylesheet" type="text/scss" href="/web/static/src/scss/report.scss"/>
        <link rel="stylesheet" type="text/scss" href="/web/static/src/scss/layout_standard.scss"/>
        <link rel="stylesheet" type="text/scss" href="/web/static/src/scss/layout_background.scss"/>
        <link rel="stylesheet" type="text/scss" href="/web/static/src/scss/layout_boxed.scss"/>
        <link rel="stylesheet" type="text/scss" href="/web/static/src/scss/layout_clean.scss"/>

        <script type="text/javascript" src="/web/static/src/js/services/session.js"/>
        <script type="text/javascript" src="/web/static/src/js/public/public_root.js"/>
        <script type="text/javascript" src="/web/static/src/js/public/public_root_instance.js"/>
        <script type="text/javascript" src="/web/static/src/js/public/public_widget.js"/>
        <script type="text/javascript" src="/web/static/src/js/report/utils.js"/>
        <script type="text/javascript" src='/web/static/src/js/report/report.js' />
    </template>

    <template id="report_assets_pdf">
        <link href="/web/static/src/css/reset.min.css" rel="stylesheet"/>
    </template>

    <!-- Private templates used internally by reports -->

    <template id="report_layout" name="Report layout">&lt;!DOCTYPE html&gt;
        <html t-att-lang="lang and lang.replace('_', '-')"
              t-att-data-report-margin-top="data_report_margin_top"
              t-att-data-report-header-spacing="data_report_header_spacing"
              t-att-data-report-dpi="data_report_dpi"
              t-att-data-report-landscape="data_report_landscape"
              t-att-web-base-url="web_base_url">
            <head>
                <meta charset="utf-8"/>
                <meta name="viewport" content="initial-scale=1"/>
                <title><t t-esc="title or 'Odoo Report'"/></title>
                <t t-call-assets="web.report_assets_common" t-js="false"/>
                <t t-call-assets="web.assets_common" t-css="false"/>
                <t t-call-assets="web.report_assets_common" t-css="false"/>
            </head>
            <body t-att-class="'container' if not full_width else 'container-fluid'">
                <div id="wrapwrap">
                    <main>
                        <t t-raw="0"/>
                    </main>
                </div>
            </body>
        </html>
    </template>

    <template id="html_container">
        <t t-set="body_classname" t-value="'container'"/>
        <t t-call="web.report_layout">
            <t t-raw="0"/>
        </t>
    </template>

    <template id="minimal_layout">
        &lt;!DOCTYPE html&gt;
        <t t-raw="'&lt;base href=%s&gt;' % base_url"/>
        <html style="height: 0;">
            <head>
                <t t-if="display_css">
                    <t t-call-assets="web.report_assets_pdf" t-js="false"/>
                    <t t-call-assets="web.report_assets_common" t-js="false"/>
                    <t t-call-assets="web.report_assets_pdf" t-css="false"/>
                </t>
                <t t-else="">
                    <style>
                        .header, .footer {
                            margin-left: <t t-if="paperformat"><t t-esc="paperformat.margin_left" />mm</t><t t-else="">7mm</t>;
                            margin-right: <t t-if="paperformat"><t t-esc="paperformat.margin_right" />mm</t><t t-else="">7mm</t>;
                            font-family: 'Arial';
                            font-size: 10px;
                            -webkit-print-color-adjust: exact;
                            line-height: 1.4;
                            text-align: left;
                            width:100%
                        }
                        .header address, .footer address {
                            font-style: normal;
                            font-size: 9px;
                        }
                        .text-muted {
                            color:#6c757d;
                        }
                        .list-inline-item {
                            padding-left: 0;
                            display: inline-block;
                            margin-bottom: 0;
                            margin-right:2px;
                        }
                        img {
                            height:35px;
                        }
                        .text-center {
                            text-align: center;
                        }
                        .text-right {
                            text-align: right;
                        }
                        .float-left {
                            float: left;
                        }
                        .float-right {
                            float: right;
                        }
                        .clearfix::after {
                            display: block;
                            clear: both;
                            content: "";
                        }
                        .mb8 {
                            margin-bottom: 8px;
                        }
                        ul {
                            margin-top:1px;
                            margin-bottom:2px;
                            padding-left: 0;
                        }
                        .list-unstyled {
                            padding-left: 0;
                            list-style: none;
                        }
                        .o_background_header, .o_boxed_header {
                            border-bottom: 1px solid #e9ecef
                        }
                        .o_clean_header {
                            border-bottom: 1px solid #00A09D;
                        }
                        .o_clean_footer {
                            margin-top: 200px;
                            border-top: 3px solid #875A7B;
                        }
                        .o_background_footer, .o_background_header, .o_report_layout_background, .o_boxed_header, .o_boxed_footer{
                            font-family: 'Lato';
                            color: #495057;
                            font-size: 9px;
                        }
                        .o_boxed_footer {
                            margin-top: 200px;
                            white-space: nowrap;
                            border-top: 2px solid #495057;
                        }
                        .o_background_footer ul {
                            border-top: 1px solid #875A7B;
                            border-bottom: 1px solid #875A7B;
                            padding: 4px 0;
                            margin: 0 0 4px 0;
                        }
                        .o_background_footer ul li {
                            color: #875A7B;
                        }

                        .col-3 {
                            flex: 0 0 25%;
                            max-width: 25%;
                            position: relative;
                            width: 100%;
                            padding-right: 15px;
                            padding-left: 15px;
                        }
                        .col-4 {
                            flex: 0 0 33.33333333%;
                            max-width: 33.33333333%;
                            position: relative;
                            width: 100%;
                            padding-right: 15px;
                            padding-left: 15px;
                        }
                        // Fontawesome should be installed on system than only style will apply.
                        // HTML unicodes are supported so that it can be use in place of fontawesome. 
                        .fa {
                            display: inline-block;
                            font-family: FontAwesome;
                            font-size: inherit;
                            text-rendering: auto;
                            font-style: normal;
                        }
                        .fa-phone:before {
                            content: "\f095";
                        }
                        .fa-at:before {
                            content: "\f1fa";
                        }
                        .fa-globe:before {
                            content: "\f0ac";
                        }
                        .o_clean_footer .pagenumber {
                            border: 2px solid #875A7B;
                            background-color: #00A09D;
                            color: white;
                            padding: 4px 8px;
                            text-align: center;
                        }
                    </style>
                </t>
                <t t-if="paperformat">
                    <style>
                        @page {
                            size: <t t-esc="paperformat.format"/> <t t-esc="paperformat.orientation"/>;
                            margin: <t t-esc="paperformat.margin_top"/>mm <t t-esc="paperformat.margin_right"/>mm <t t-esc="paperformat.margin_bottom"/>mm <t t-esc="paperformat.margin_left"/>mm
                        }
                        @media print {
                            .table td, .table th {
                                background-color: inherit !important;
                            }
                            .o_report_layout_boxed table tbody tr td.o_price_total {
                                background-color: #e9ecef !important;
                            }
                            .o_report_layout_boxed div#total table tr.o_total td {
                                background-color: #495057 !important;
                            }
                        }
                       
                    </style>
                </t>
                <meta charset="utf-8"/>
            </head>
            <body class="container" t-att-onload="subst_needed and 'subst()'">
                <t t-raw="body"/>
            </body>
        </html>
    </template>

    <!-- External layouts styles -->

    <template id="address_layout">
        <t t-set="colclass" t-value="('col-md-5' if report_type == 'html' else 'col-5') + ' ml-auto'"/>
        <t t-if="address">
            <div class="address row">
                <t t-if="information_block">
                    <t t-set="colclass" t-value="'col-5 offset-1'"/>
                    <div name="information_block" class="col-6">
                        <t t-raw="information_block"/>
                    </div>
                </t>
                <div name="address" t-att-class="colclass">
                    <t t-raw="address"/>
                </div>
            </div>
        </t>
    </template>

    <template id="external_layout_background">
        <div class="header">
            <div class="o_background_header">
            <div class="float-right">
                <h3 class="mt0 text-right" t-field="company.report_header"/>
            </div>
            <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" class="float-left" alt="Logo"/>
            <div class="float-left company_address">
                <div>
                    <strong t-field="company.partner_id.name"/>
                </div>
                <span t-field="company.partner_id"
                    t-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/>
            </div>
            <div class="clearfix mb8"/>
            </div>
        </div>

        <div class="article o_report_layout_background" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
            <t t-call="web.address_layout"/>
            <t t-raw="0"/>
        </div>

        <div class="footer o_background_footer">
            <div class="text-center">
                <ul class="list-inline">
                    <li t-if="company.phone" class="list-inline-item"><i class="fa fa-phone" role="img" aria-label="Phone" title="Phone"/> <span t-field="company.phone"/></li>
                    <li t-if="company.email" class="list-inline-item"><i class="fa fa-at" role="img" aria-label="Email" title="Email"/> <span t-field="company.email"/></li>
                    <li t-if="company.website" class="list-inline-item"><i class="fa fa-globe" role="img" aria-label="Website" title="Website"/> <span t-field="company.website"/></li>
                    <li t-if="company.vat" class="list-inline-item"><i class="fa fa-building-o" role="img" aria-label="Fiscal number"/><t t-esc="company.country_id.vat_label or 'Tax ID'"/>: <span t-field="company.vat"/></li>
                </ul>
                <div t-field="company.report_footer"/>
                <div t-if="report_type == 'pdf'" class="text-muted">
                    Page:
                    <span class="pageNumber"/>
                    of
                    <span class="totalPages"/>
                </div>
            </div>
        </div>
    </template>

    <template id="external_layout_boxed">
        <div class="header">
            <div class="o_boxed_header">
            <div class="row mb8">
                <div class="col-6">
                    <img t-if="company.logo" class="float-left" t-att-src="image_data_uri(company.logo)" alt="Logo"/>
                </div>
                <div class="float-right col-6 text-right mb4">
                    <h4 class="mt0" t-field="company.report_header"/>
                    <div name="company_address" class="mb4">
                        <span class="company_address text-right" t-field="company.partner_id"
                            t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}'/>
                    </div>
                </div>
            </div>
            <div class="clearfix mb8"/>
            </div>
        </div>

        <div class="article o_report_layout_boxed" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
            <t t-call="web.address_layout"/>
            <t t-raw="0"/>
        </div>

        <div class="footer o_boxed_footer">
            <div class="text-center">
                <ul class="list-inline">
                    <li t-if="company.phone" class="list-inline-item">Tel: <span t-field="company.phone"/></li>
                    <li t-if="company.email" class="list-inline-item">Mail: <span t-field="company.email"/></li>
                    <li t-if="company.website" class="list-inline-item">Web: <span t-field="company.website"/></li>
                    <li t-if="company.vat" class="list-inline-item"><t t-esc="company.country_id.vat_label or 'Tax ID'"/>: <span t-field="company.vat"/></li>
                </ul>
                <div t-field="company.report_footer"/>
                <div t-if="report_type == 'pdf'">
                    Page: <span class="pageNumber"/> / <span class="totalPages"/>
                </div>
            </div>
        </div>
    </template>

    <template id="external_layout_clean">
        <div class="header">
            <div class="o_clean_header">
            <div class="row">
                <div class="col-6 float-left">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" alt="Logo"/>
                </div>
                <div class="col-5 offset-1 float-right" name="company_address" >
                    <ul class="list-unstyled">
                        <strong><li t-if="company.name"><span t-field="company.name"/></li></strong>
                        <li t-if="company.vat"><t t-esc="company.country_id.vat_label or 'Tax ID'"/>: <span t-field="company.vat"/></li>
                        <li t-if="company.phone">Tel: <span t-field="company.phone"/></li>
                        <li t-if="company.email"><span t-field="company.email"/></li>
                        <li t-if="company.website"><span t-field="company.website"/></li>
                    </ul>
                </div>
            </div>
            <div class="clearfix mb8"/>
            </div>
        </div>

        <div class="article o_report_layout_clean"  t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
            <t t-call="web.address_layout"/>
            <t t-raw="0"/>
        </div>

        <div class="footer o_clean_footer">
            <div class="row mt8">
                <div class="col-3">
                    <span t-field="company.report_footer"/>
                </div>
                <div class="col-4 text-right float-left" style="margin-left:120px;">
                    <span class="company_address" t-field="company.partner_id"
                        t-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/>
                </div>
                <div class="col-4">
                    <h4 class="mt0 mb0 text-uppercase" t-field="company.report_header"/>
                </div>
                <div class="col-1 float-right">
                    <ul t-if="report_type == 'pdf'" class="list-inline pagenumber float-right text-center">
                        <li class="list-inline-item"><strong><span class="pageNumber"/></strong></li>
                    </ul>
                </div>
            </div>
        </div>
    </template>

    <template id="external_layout_standard">
        <div class="header">
            <div class="row">
                <div class="col-3 mb4">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 45px;" alt="Logo"/>
                </div>
                <div class="col-9 text-right" style="margin-top:22px;" t-field="company.report_header" name="moto"/>
            </div>
            <div t-if="company.logo or company.report_header" class="row zero_min_height">
                <div class="col-12">
                    <div style="border-bottom: 1px solid black;"/>
                </div>
            </div>
            <div class="row">
                <div class="col-6" name="company_address">
                    <div t-field="company.partner_id"
                        t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}'
                    />
                </div>
            </div>
        </div>

        <div class="article o_report_layout_standard"  t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
            <t t-call="web.address_layout"/>
            <t t-raw="0"/>
        </div>

        <div class="footer o_standard_footer">
            <div class="text-center" style="border-top: 1px solid black;">
                <ul class="list-inline mb4">
                    <li t-if="company.phone" class="list-inline-item">Phone: <span t-field="company.phone"/></li>
                    <li t-if="company.email" class="list-inline-item">Email: <span t-field="company.email"/></li>
                    <li t-if="company.website" class="list-inline-item">Web: <span t-field="company.website"/></li>
                    <li t-if="company.vat" class="list-inline-item"><t t-esc="company.country_id.vat_label or 'Tax ID'"/>: <span t-field="company.vat"/></li>
                </ul>

                <div name="financial_infos">
                    <span t-field="company.report_footer"/>
                </div>
                <div t-if="report_type == 'pdf'" class="text-muted">
                    Page: <span class="pageNumber"/> / <span class="totalPages"/>
                </div>
            </div>
        </div>
    </template>

    <!-- Public api: layout to t-call from reports -->

    <template id="external_layout">
        <t t-if="not o" t-set="o" t-value="doc"/>

        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>

        <t t-if="company.external_report_layout_id" t-call="{{company.external_report_layout_id.key}}"><t t-raw="0"/></t>
        <t t-else="else" t-call="web.external_layout_standard"><t t-raw="0"/></t>

    </template>

    <template id="internal_layout">
        <t t-if="not o" t-set="o" t-value="doc"/>

        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>

        <div class="header">
            <div class="row">
                <div class="col-3">
                    <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M')"/>
                </div>
                <div class="col-2 offset-2 text-center">
                    <span t-esc="company.name"/>
                </div>
                <div class="col-2 offset-3 text-right">
                    <ul class="list-inline">
                        <li class="list-inline-item"><span class="page"/></li>
                        <li class="list-inline-item">/</li>
                        <li class="list-inline-item"><span class="topage"/></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="article" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
          <t t-raw="0"/>
        </div>
    </template>

    <template id="basic_layout">
        <t t-call="web.html_container">
            <div class="article" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
                <t t-raw="0"/>
            </div>
        </t>
    </template>

    <!-- Customize the company form view by adding paperformat field as well as demo reports -->
    <!-- Demo reports definition -->
    <template id="preview_internalreport">
        <t t-call="web.html_container">
            <t t-set="o" t-value="res_company"/>
            <t t-call="web.internal_layout">
                <div class="page">
                    <p>This is a sample of an internal report.</p>
                </div>
            </t>
        </t>
    </template>
    <template id="preview_externalreport">
        <t t-call="web.html_container">
            <t t-set="o" t-value="res_company"/>
            <t t-call="web.external_layout">
                <div class="page">
                    <p>This is a sample of an external report.</p>
                </div>
            </t>
        </t>
    </template>
    <report id="action_report_internalpreview"
        model="res.company"
        name="web.preview_internalreport"
        file="web.preview_internalreport"
        string="Preview Internal Report"
        report_type="qweb-pdf"/>
    <report id="action_report_externalpreview"
        model="res.company"
        name="web.preview_externalreport"
        file="web.preview_externalreport"
        string="Preview External Report"
        report_type="qweb-pdf"/>
</odoo>
