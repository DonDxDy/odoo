<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="l10n_in_invoice_form_inherit_new" model="ir.ui.view">
        <field name="name">l10n.in.account.move.form.inherit</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="l10n_in.invoice_form_inherit_l10n_in"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='l10n_in_import_export']" position="after">
                <field name="l10n_in_company_country_code" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='l10n_in_reseller_partner_id']" position="after">
                <field name="l10n_in_gst_treatment"
                    attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),('type', '=', 'entry')],'required':[('l10n_in_company_country_code','=','IN'),('type','!=','entry')]}"/>
                <field name="l10n_in_gstin"
                    attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),'|',('l10n_in_gst_treatment','in',['consumer','unregistered','overseas']),'|',('type','=','entry')],'required':[('l10n_in_gst_treatment','in',['regular','composition','special_economic_zone','deemed_export']),('l10n_in_company_country_code','=', 'IN'),('type', '=', 'entry')]}"/>
                <div class="o_td_label">
                    <label for="l10n_in_place_of_supply_id"
                        attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),'|',('type', 'in',['in_invoice','in_refund','entry']),('l10n_in_gst_treatment','in',['consumer','unregistered','overseas'])]}"/>
                    <label for="l10n_in_place_of_supply_id" string="Source of Supply"
                        attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),'|',('type','not in',['in_invoice','in_refund']),('l10n_in_gst_treatment','in',['consumer','unregistered','overseas'])]}"/>
                </div>
                <field name="l10n_in_place_of_supply_id" nolabel="1"
                    attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),'|',('type', '=', 'entry'),('l10n_in_gst_treatment','in',['consumer','unregistered','overseas'])],'required':[('l10n_in_gst_treatment','in',['regular','composition','special_economic_zone','deemed_export']),('l10n_in_company_country_code','=','IN'),('type','!=','entry')]}"
                    options='{"no_create_edit": True, "no_open": True}'/>
            </xpath>
            <!-- group string still visible -->
            <xpath expr="//field[@name='l10n_in_export_type']" position="attributes">
                <attribute name="attrs">{}</attribute>
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='l10n_in_shipping_bill_number']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('l10n_in_gst_treatment', 'not in', ['overseas','deemed_export']), ('type', '=', 'entry')]}</attribute>
            </xpath>
            <xpath expr="//field[@name='l10n_in_shipping_bill_date']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('l10n_in_gst_treatment', 'not in', ['overseas','deemed_export']), ('type', '=', 'entry')]}</attribute>
            </xpath>
            <xpath expr="//field[@name='l10n_in_shipping_port_code_id']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('l10n_in_gst_treatment', 'not in', ['overseas','deemed_export']), ('type', '=', 'entry')]}</attribute>
            </xpath>

            <xpath expr="//field[@name='l10n_in_reseller_partner_id']" position="attributes">
                <attribute name="attrs">{'invisible': ['|' ,('type', 'not in', ('out_invoice', 'out_refund')),('l10n_in_company_country_code','!=', 'IN'), ('type', '=', 'entry')]}</attribute>
            </xpath>
        </field>
    </record>
</odoo>
