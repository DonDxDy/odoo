<?xml version="1.0" encoding="utf-8"?>
<odoo>

<template id="wysiwyg_iframe_css_assets" name="CSS assets for wysiwyg iframe content">
    <t t-call-assets="web.assets_common" t-js="false"/>
    <t t-call-assets="web.assets_backend" t-js="false"/>
</template>

<template id="compiled_assets_wysiwyg" name="Wysiwyg Editor">
    <t t-call-assets="web_editor.assets_wysiwyg"/>
</template>

<template id="we3" name="we3 library Assets">
    <!-- Base -->

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/init/init.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/init/baseOptions.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/tools/utils.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/tools/tags.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/WrappedRange.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/EventDispatcher.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/AbstractPlugin.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/PluginsManager.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/Editor.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/attributes/Attributes.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/attributes/ClassName.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/attributes/Style.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/ArchNode.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/utils/is.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/utils/rules.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/utils/formatting.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/ArchNodeText.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/ArchNodeVirtualText.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/ArchNodeFragment.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/ArchNodeRoot.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/ArchNodeBr.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/tags.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/arch/nodes/ArchNodeFormattingSpace.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/private/BaseRules.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/Rules.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/private/BaseArch.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/Arch.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/private/BaseRange.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/Range.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/private/BaseRenderer.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/Renderer.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/private/BaseUserInput.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/UserInput.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/base/basePlugins/Selector.js"/>

    <!-- Tests base -->
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/testManager/TestManagerUtils.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/testManager/TestContainerNode.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/testManager/TestNode.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/testManager/TestManagerPlugin.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/pluginManager/TestAutoInstall.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/init/we3.js"/>

    <!-- Plugins -->

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/init/defaultOptions.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/drop/Clipboard.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/drop/DropBlock.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/drop/DropBlockSelector.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/Overlay.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/Position.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/Popover.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/Sidebar.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/Toolbar.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/CodeView.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/ContextMenu.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/Iframe.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/FullScreen.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/ui/Modal.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/insert/List.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/insert/Media.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/insert/Upload.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/text/Color.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/text/FontStyle.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/text/Indent.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/text/Paragraph.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/misc/History.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/src/js/plugins/misc/Jinja.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/arch/TestAttributes.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/arch/TestIs.js"/>

    <!-- Tests base plugins -->

    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/TestArchAndRules.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/TestRange.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/TestRenderer.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestKeyboard.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestKeyboardArrow.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestKeyboardBackspace.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestKeyboardChar.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestKeyboardComplex.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestKeyboardDelete.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestKeyboardEnter.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestKeyboardTab.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestKeyboardUnbreakable.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/base/basePlugins/input/keyboard/TestVirtualKeyboard.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/integration/TestComplexInteraction.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/integration/TestUI.js"/>

    <!-- Tests plugins -->

    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/drop/TestClipboard.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/drop/TestDropBlock.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/drop/TestDropBlockSelector.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/insert/TestList.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/insert/TestMedia.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/insert/TestUpload.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/misc/TestHistory.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/misc/TestJinja.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/TestCodeView.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/TestPopover.js"/>

    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/toolbar/TestToolbar.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/toolbar/TestToolbarColor.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/toolbar/TestToolbarFontStyle.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/toolbar/TestToolbarIndent.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/toolbar/TestToolbarKeymap.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/toolbar/TestToolbarList.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/toolbar/TestToolbarParagraph.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/we3/tests/plugins/ui/toolbar/TestToolbarWand.js"/>

    <!-- todo: place this test in the proper folder and place the following line in the proper file -->
    <!-- <script type="text/javascript" src="/web_editor/static/tests/plugins/TestDynamicFields.js"/> -->

</template>

<template id="assets_wysiwyg" name="Wysiwyg Editor Assets">
    <!-- odoo utils -->

    <t t-call="web._assets_helpers">
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/bootstrap_overridden.scss"/>
    </t>

    <!-- lib -->

    <link rel="stylesheet" type="text/css" href="/web_editor/static/lib/cropper/css/cropper.css"/>

    <script type="text/javascript" src="/web_editor/static/lib/cropper/js/cropper.js"/>
    <script type="text/javascript" src="/web_editor/static/lib/jQuery.transfo.js"/>

    <!-- lib we3 -->

    <t t-call="web_editor.we3"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/tests/TestToolbarLink.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/tests/TestToolbarMedia.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/tests/TestToolbarCrop.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/tests/TestToolbarColorPicker.js"/>

    <!-- odoo -->

    <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/wysiwyg.scss"/>
    <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/wysiwyg_iframe.scss"/>
    <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/wysiwyg_icons.css"/>
    <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/wysiwyg_snippets.scss"/>

    <script type="text/javascript" src="/web_editor/static/src/js/web_editor.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/tools/no-dependencies.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/tools/fonts.js"/>

    <!-- Snippets behaviors -->

    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg_snippets/wysiwyg_snippets.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg_snippets/snippets.editor.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg_snippets/snippets.options.js"/>

    <!-- widgets-->

    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/widgets/dialog.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/widgets/alt_dialog.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/widgets/colorpicker_dialog.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/widgets/crop_dialog.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/widgets/image_optimize_dialog.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/widgets/link_dialog.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/widgets/media_dialog.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/widgets/media.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/widgets/widgets.js"/>

    <!-- plugins insert -->

    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/insert/link.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/insert/media.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/insert/table.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/insert/checklist.js"/>
    <!-- <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/insert/hint.js"/> -->

    <!-- plugins text -->

    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/text/ColorPicker.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/text/format_text.js"/>

    <!-- plugins drop -->

    <!-- <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/drop/dropzone.js"/> -->

    <!-- plugins misc -->

    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/misc/keymap.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/misc/transform.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/misc/customizeBlock.js"/>

    <!-- Tests -->

    <!-- <script type="text/javascript" src="/web_editor/static/src/js/wysiwyg/plugin/tests/toolbarFontSize.js"/> -->

    <!-- additional plugins -->

    <script type="text/javascript" src="/web_editor/static/src/js/backend/convert_inline.js"/>
</template>

<template id="_assets_primary_variables" inherit_id="web._assets_primary_variables">
    <xpath expr="//link[last()]" position="after">
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/wysiwyg_variables.scss"/>
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/web_editor.variables.scss"/>
    </xpath>
</template>

<template id="_assets_secondary_variables" inherit_id="web._assets_secondary_variables">
    <xpath expr="//link" position="before">
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/secondary_variables.scss"/>
    </xpath>
</template>

<template id="assets_common" inherit_id="web.assets_common" name="Web Editor Common Assets (used in backend interface and website)">
    <xpath expr="script[last()]" position="after">
        <script type="text/javascript" src="/web_editor/static/lib/vkbeautify/vkbeautify.0.99.00.beta.js"/>
        <script type="text/javascript" src="/web_editor/static/src/js/common/ace.js"/>
        <script type="text/javascript" src="/web_editor/static/src/js/root.js"/>
    </xpath>
</template>

<template id="_assets_backend_helpers" inherit_id="web._assets_backend_helpers">
    <xpath expr="//link" position="before">
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/bootstrap_overridden_backend.scss"/>
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/bootstrap_overridden.scss"/>
    </xpath>
</template>

<template id="assets_backend" inherit_id="web.assets_backend" name="Web Editor Backend Assets (used in backend interface)">
    <xpath expr="link[last()]" position="after">
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/web_editor.common.scss"/> <!-- not in common because compiled differently with context -->
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/web_editor.backend.scss"/>
    </xpath>
    <xpath expr="script[last()]" position="after">
        <script type="text/javascript" src="/web_editor/static/src/js/backend/field_html.js" />
    </xpath>
</template>

<template id="_assets_frontend_helpers" inherit_id="web._assets_frontend_helpers">
    <xpath expr="//link" position="before">
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/bootstrap_overridden.scss"/>
    </xpath>
</template>

<template id="assets_frontend" inherit_id="web.assets_frontend" name="Web Editor Frontend Assets (used in public odoo)" priority="15">
    <xpath expr="//link[last()]" position="after">
        <link rel="stylesheet" type="text/scss" href="/web_editor/static/src/scss/web_editor.common.scss"/> <!-- not in common because compiled differently with context -->
        <link rel="stylesheet" type ="text/scss" href="/web_editor/static/src/scss/web_editor.frontend.scss"/>
    </xpath>
</template>

<template id="qunit_suite" inherit_id="web.qunit_suite">
    <xpath expr="//script[last()]" position="after">
        <script type="text/javascript">
            odoo.define('web_editor.wysiwyg.root.test', function (require) {
                'use strict';
                var WysiwygRoot = require('web_editor.wysiwyg.root');
                WysiwygRoot.include({
                    assetLibs: null // We need to add the asset because tests performed overwrites (Dialog...)
                });
            });
        </script>
        <t t-call="web_editor.compiled_assets_wysiwyg"/>
        <script type="text/javascript" src="/web_editor/static/tests/test_utils.js"/>
        <script type="text/javascript" src="/web_editor/static/tests/we3_tests.js"/>
        <script type="text/javascript" src="/web_editor/static/tests/media_crop_tests.js"/>
        <script type="text/javascript" src="/web_editor/static/tests/color_picker_tests.js"/>
        <!-- todo: nby fix me -->
        <!-- <script type="text/javascript" src="/web_editor/static/tests/plugins/TestDynamicFields.js"/> -->
        <!-- <script type="text/javascript" src="/web_editor/static/tests/field_html_tests.js"/>
        <script type="text/javascript" src="/web_editor/static/tests/wysiwyg_tests.js"/>
        <script type="text/javascript" src="/web_editor/static/tests/wysiwyg_keyboard_tests.js"/>
        <script type="text/javascript" src="/web_editor/static/tests/wysiwyg_snippets_tests.js"/> -->
    </xpath>
</template>

<!--
    The web_editor.colorpicker template regroups section of colorpicker menu for website customization
    (text foreground/background but also snippet background color option).
    As it is presentend below, the colorpicker tag regroups a set of .o_colorpicker_section with name,
    icon-class and icon-content as data. These will be used to build the colorpicker dropdowns.

    Redefinition can edit section content, add sections or even remove them. If no section is found when
    building a colorpicker dropdown, the template content will be used without changes as the colorpicker
    dropdown content.

    Sections should contain a set of button with a data-color attribute. When selecting such a button to
    edit style, the "bg-x" class or the "text-x" will be automatically added.
-->
<template id="web_editor.colorpicker" name="Color-Picker">
    <colorpicker>
        <div class="o_colorpicker_section" data-name="theme" data-display="Theme Colors" data-icon-class="fa fa-flask">
            <button data-color="alpha"></button>
            <button data-color="beta"></button>
            <button data-color="gamma"></button>
            <button data-color="delta"></button>
            <button data-color="epsilon"></button>
        </div>
        <div class="o_colorpicker_section" data-name="transparent_grayscale" data-display="Transparent Colors" data-icon-class="fa fa-eye-slash">
            <button class="o_btn_transparent"></button>
            <button data-color="black-25"></button>
            <button data-color="black-50"></button>
            <button data-color="black-75"></button>
            <button data-color="white-25"></button>
            <button data-color="white-50"></button>
            <button data-color="white-75"></button>
        </div>
        <div class="o_colorpicker_section" data-name="common" data-display="Common Colors" data-icon-class="fa fa-paint-brush">
            <button data-color="black"></button>
            <button data-color="white"></button>
            <div class="clearfix"/>
            <button data-color="900"></button>
            <button data-color="800"></button>
            <button data-color="700"></button>
            <button data-color="600"></button>
            <button data-color="500"></button>
            <button data-color="400" class="d-none"></button><!-- Hide this one to be able to use it but not display it -->
            <button data-color="300"></button>
            <button data-color="200"></button>
            <button data-color="100"></button>
        </div>
    </colorpicker>
</template>
</odoo>
