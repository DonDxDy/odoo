<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="sequence_mrp_prod" model="ir.sequence">
            <field name="name">Production order</field>
            <field name="code">mrp.production</field>
            <field name="prefix">MO/</field>
            <field name="padding">5</field>
            <field name="number_next">1</field>
            <field name="number_increment">1</field>
        </record>

        <record id="sequence_mrp_route" model="ir.sequence">
            <field name="name">Routing</field>
            <field name="code">mrp.routing</field>
            <field name="prefix">RO/</field>
            <field name="padding">5</field>
            <field name="number_next">1</field>
            <field name="number_increment">1</field>
        </record>

        <record id="sequence_mrp_unbuild" model="ir.sequence">
            <field name="name">Unbuild</field>
            <field name="code">mrp.unbuild</field>
            <field name="prefix">UB/</field>
            <field name="padding">5</field>
            <field name="number_next">1</field>
            <field name="number_increment">1</field>
        </record>

        <!--
             Procurement rules and routes
        -->

        <record id="route_warehouse0_manufacture" model='stock.location.route'>
            <field name="name">Manufacture</field>
            <field name="company_id"></field>
            <field name="sequence">5</field>
        </record>

        <!-- Enable the manufacturing in warehouse0 -->
        <record id='stock.warehouse0' model='stock.warehouse'>
            <field name='manufacture_to_resupply' eval='True'/>
        </record>

        <!-- Reasons To Block Workcenter -->
        <record id="block_reason0" model="mrp.workcenter.productivity.loss">
            <field name="name">Material Availability</field>
            <field name="loss_type">availability</field>
            <field name="sequence">1</field>
        </record>
        <record id="block_reason1" model="mrp.workcenter.productivity.loss">
            <field name="name">Equipment Failure</field>
            <field name="loss_type">availability</field>
            <field name="sequence">2</field>
        </record>
        <record id="block_reason2" model="mrp.workcenter.productivity.loss">
            <field name="name">Setup and Adjustments</field>
            <field name="loss_type">availability</field>
            <field name="sequence">3</field>
        </record>
        <record id="block_reason4" model="mrp.workcenter.productivity.loss">
            <field name="name">Reduced Speed</field>
            <field name="loss_type">performance</field>
            <field name="manual" eval="False"/>
            <field name="sequence">5</field>
        </record>
        <record id="block_reason5" model="mrp.workcenter.productivity.loss">
            <field name="name">Process Defect</field>
            <field name="loss_type">quality</field>
            <field name="sequence">6</field>
        </record>
        <record id="block_reason6" model="mrp.workcenter.productivity.loss">
            <field name="name">Reduced Yield</field>
            <field name="loss_type">quality</field>
            <field name="sequence">7</field>
        </record>
        <record id="block_reason7" model="mrp.workcenter.productivity.loss">
            <field name="name">Fully Productive Time</field>
            <field name="loss_type">productive</field>
            <field name="manual" eval="False"/>
            <field name="sequence">0</field>
        </record>

        <function model="ir.model.data" name="_update">
            <value>stock.picking.type</value>
            <value>mrp</value>
            <value eval="{}"/>
            <value>picking_type_manufacturing</value>
            <value eval="True"/>
            <value eval="True"/>
            <value>init</value>
            <value model="stock.warehouse" eval="obj().env.ref('stock.warehouse0').manu_type_id.id"/>
        </function>

        <template id="exception_on_mrp">
            <div class="alert alert-warning">
              Exception(s) occurred on the manufactured order(s):
              <t t-foreach="mrp_order_ids" t-as="mrp_order">
                  <a href="#" data-oe-model="mrp.production" t-att-data-oe-id="mrp_order.id"><t t-esc="mrp_order.name"/></a>.
              </t>
              Manual actions may be needed.
              <div class="mt16">
                    <p>Exception(s):</p>
                    <t t-foreach="mrp_order_ids" t-as="mrp_order">
                        <t t-if="mrp_order.state=='cancel'">
                            Your order <a href="#" data-oe-model="mrp.production" t-att-data-oe-id="mrp_order.id"><t t-esc="mrp_order.name"/></a> has been cancelled.
                        </t>
                    </t>
                    <ul t-foreach="order_exceptions" t-as="exception">
                        <li>
                            <t t-set="order_line" t-value="exception[0]"/>
                            <t t-set="new_qty" t-value="exception[1][0]"/>
                            <t t-set="old_qty" t-value="exception[1][1]"/>
                            <t t-esc="new_qty"/>  of <t t-esc="order_line.product_id.name"/>
                            ordered instead of <t t-esc="old_qty"/>
                        </li>
                    </ul>
              </div>
            </div>
        </template>

    </data>

</odoo>
