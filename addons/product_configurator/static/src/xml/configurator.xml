<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <t t-name="Configurator">
        <div class="o_product_configurator">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <b>PRODUCT CONFIGURATOR</b>
                </div>
                <div class="panel-body">
                    <t t-if="!widget.data.length">
                        <h5 class="text-center mt16">No attribute available for this template.</h5>
                    </t>
                    <div class="config_fields"/>
                </div>
            </div>
        </div>
    </t>

    <t t-name="ConfigFieldsWidget">
        <t t-set="field" t-value="widget.field"/>
        <t t-call="product_configurator.field_{{widget.field.type}}"/>
    </t>

    <t t-name="product_configurator.field">
        <div class="form-group form-field row">
            <div class="col-md-3 col-sm-4 text-right-not-xs mt8">
                <label class="control-label" t-att-for="field.name">
                    <t t-esc="field.name"/>
                </label>
            </div>
            <div class="col-md-7 col-sm-8 mt8">
                <t t-raw="0"/>
            </div>
        </div>
    </t>

    <t t-name="product_configurator.field_radio">
        <t t-call="product_configurator.field">
            <div class="o_configurator_flex">
                <t t-foreach="field.values" t-as="v">
                    <div class="radio o_configurator_flex_item">
                        <label>
                            <input
                                type="radio"
                                class="o_field_input"
                                t-att-name="field.name"
                                t-att-data-attr-id="field.id"
                                t-att-value="v.id"
                                t-att-data-value = "v.id"
                                t-att-checked = "v.id === field.selected_value ? 'checked': null"
                            />
                            <span>
                                <t t-esc="v.name"/>
                            </span>
                        </label>
                    </div>
                </t>
            </div>
        </t>
    </t>

    <t t-name="product_configurator.field_select">
        <t t-call="product_configurator.field">
            <select class="form-control o_field_input" t-att-name="field.name" t-att-data-attr-id="field.id">
                <t t-foreach="field.values" t-as="v">
                    <option t-att-value="v.id" t-att-selected = "v.id === field.selected_value ? '1': null">
                        <t t-esc="v.name"/>
                    </option>
                </t>
            </select>
        </t>
    </t>

    <!--TODO Should be replace by radio field-->
    <t t-name="product_configurator.field_color">
        <t t-call="product_configurator.field">
            <t t-foreach="field.values" t-as="v">
                <label t-attf-style="background-color:#{v.html_color or v.name}" t-attf-class="css_attribute_color">
                    <input 
                        type="radio"
                        class="o_field_input"
                        t-att-name="field.name"
                        t-att-value="v.id"
                        t-att-data-attr-id="field.id"
                        t-att-title="v.name"
                        t-att-checked = "v.id === field.selected_value ? 'checked': null"/>
                </label>
            </t>
        </t>
    </t>

    <!--Custom Fields-->
    <t t-name="product_configurator.field_custom">
        <t t-call="product_configurator.custom_field_{{field.value_type}}"/>
    </t>

    <t t-name="product_configurator.custom_field_char">
        <t t-call="product_configurator.field">
            <input
                type="text"
                class="form-control o_custom_field_input"
                t-att-name="field.name"
                t-att-data-attr-id="field.id"
                t-att-value="field.selected_value"
            />
        </t>
    </t>

    <!-- Text Field -->
    <t t-name="product_configurator.custom_field_text">
        <t t-call="product_configurator.field">
            <textarea
                class="form-control o_custom_field_input"
                t-att-name="field.name"
                t-att-data-attr-id="field.id">
                <t t-esc="field.selected_value"/>
            </textarea>
        </t>
    </t>

    <!-- Integer Field -->
    <t t-name="product_configurator.custom_field_integer">
        <t t-call="product_configurator.field">
            <input
                type="number"
                class="form-control o_custom_field_input"
                t-att-name="field.name"
                t-att-data-attr-id="field.id"
                step="1"
                t-att-value="field.selected_value"
            />
        </t>
    </t>

    <!-- Float Field -->
    <t t-name="product_configurator.custom_field_float">
        <t t-call="product_configurator.field">
            <input
                type="number"
                class="form-control o_custom_field_input"
                t-att-name="field.name"
                t-att-data-attr-id="field.id"
                step="any"
                t-att-value="field.selected_value"
            />
        </t>
    </t>

    <!-- Date Field -->
    <t t-name="product_configurator.custom_field_date">
        <t t-call="product_configurator.field">
            <input
                type="text"
                class="form-control o_custom_field_date"
                t-att-name="field.name"
                t-att-data-attr-id="field.id"
                t-att-value="field.selected_value"
            />
        </t>
    </t>

    <!-- Datetime Field -->
    <t t-name="product_configurator.custom_field_datetime">
        <t t-call="product_configurator.field">
            <input
                type="text"
                class="form-control o_custom_field_datetime"
                t-att-name="field.name"
                t-att-data-attr-id="field.id"
                t-att-value="field.selected_value"
            />
        </t>
    </t>

    <!-- Binary Field -->
    <t t-name="product_configurator.custom_field_binary">
        <t t-call="product_configurator.field">
            <input
                type="file"
                class="form-control o_custom_field_binary"
                t-att-name="field.name"
                t-att-data-attr-id="field.id"
                multiple="1"
                t-att-value="field.selected_value"
            />
        </t>
    </t>

    <!-- Color Field -->
    <t t-name="product_configurator.custom_field_color">
        <t t-call="product_configurator.field">
            <input
                type="color"
                class="form-control o_custom_field_input"
                t-att-name="field.name"
                t-att-data-attr-id="field.id"
                t-att-value="field.selected_value"
            />
        </t>
    </t>

</templates>
