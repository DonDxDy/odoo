<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!--Email template -->
        <record id="email_template_edi_sale" model="mail.template">
            <field name="name">Sales Order - Send by Email</field>
            <field name="email_from">${(object.user_id.email and '%s &lt;%s&gt;' % (object.user_id.name, object.user_id.email) or '')|safe}</field>
            <field name="subject">${object.company_id.name} ${object.state in ('draft', 'sent') and 'Quotation' or 'Order'} (Ref ${object.name or 'n/a' })</field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="model_id" ref="sale.model_sale_order"/>
            <field name="auto_delete" eval="True"/>
            <field name="report_template" ref="action_report_saleorder"/>
            <field name="report_name">${(object.name or '').replace('/','_')}${object.state == 'draft' and '_draft' or ''}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="body_html"><![CDATA[
                <table cellspacing="0" cellpadding="0" width="100%" style="font-family: 'Helvetica'; background-color: #EEE; color:#666666; border-collapse: collapse;">
                    <tr>
                        <td valign="top" align="center">
                            <table cellspacing="0" cellpadding="0" width="600" style="margin: 0 auto; width: 600px;">
                                <tr>
                                    <td>
                                        <!-- Header -->
                                        <table cellspacing="0" cellpadding="0" width="100%">
                                            <tr>
                                                <td valign="middle" align="left" style="padding:15px">
                                                    % if object.company_id.name:
                                                        <img src="/web/image?model=res.company&field=logo&id=${object.company_id.id}" />
                                                    % else:
                                                        <span style="font-size:12px;color:#AAAAAA">${ object.company_id.name },</span>
                                                    % endif
                                                </td>
                                            </tr>
                                        </table>

                                        <!-- Content -->
                                        <table cellspacing="0" cellpadding="0" width="100%" bgcolor="#fff" style="background-color:#fff;">
                                            <tr>
                                                <td width="100%" style="padding: 15px;">
                                                    <table cellspacing="0" cellpadding="0" width="100%">
                                                        <tr>
                                                            <td style="margin-bottom: 30px;">
                                                                <h1 style="color:#666666;">Dear ${object.partner_id.name},
                                                                    % set access_action = object.with_context(force_website=True).get_access_action()
                                                                    % set is_online = access_action and access_action['type'] == 'ir.actions.act_url'
                                                                    % set pay_sign_name =  ('require_payment' in object and object.require_payment and 'pay') or 'sign'
                                                                    % set access_name = is_online and object.template_id and object.state in ('draft', 'sent')  and 'Accept and %s online' % pay_sign_name or 'View %s' % doc_name
                                                                    % set access_url = is_online and access_action['url'] or ''

                                                                    % if object.partner_id.parent_id:
                                                                        (<i>${object.partner_id.parent_id.name}</i>)
                                                                    % endif
                                                                </h1>

                                                                <p style="padding: 20px 0 0;color:#666666;">
                                                                    Here is
                                                                    % if ctx.get('proforma')
                                                                    in attachment, your pro-forma
                                                                    % else
                                                                    the ${doc_name} <strong style="color:#9A6C8E;">${object.name}</strong>
                                                                    % endif
                                                                    % if object.origin:
                                                                    (with reference: ${object.origin} )
                                                                    % endif
                                                                    amounting in <strong style="color:#9A6C8E;">${object.amount_total} ${object.pricelist_id.currency_id.name}</strong>
                                                                    from ${object.company_id.name}.
                                                                </p>

                                                                % if is_online and not ctx.get('proforma'):
                                                                    <br/><br/>
                                                                        <a href="${access_url}" style="padding:10px;border:1px solid #1CC5A9; text-decoration: none; color: #1CC5A9;font-size: 16px;" class="o_default_snippet_text">${access_name}</a>
                                                                        <p style="color:#888888">(or view attached PDF)</p>
                                                                    <br/>
                                                                % endif

                                                                <div style="width:100%; height:1px; background-color:#9A6C8E;margin:20px 0;"></div>

                                                                <p style="color:#666666;">You can reply to this email if you have any questions.
                                                                    <span>Thank you,</span>
                                                                </p>

                                                                <p style="color:#666666;font-size:10px;">
                                                                % if object.user_id and object.user_id.signature:
                                                                    ${object.user_id.signature | safe}
                                                                % endif
                                                                </p>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>

                                        <!-- Footer -->
                                        <table cellspacing="0" cellpadding="0" width="100%" style="padding: 15px;">
                                            <tr>
                                                <td align="center" style="padding: 30px 15px;">
                                                    <p style="font-size:12px;color:#666666">${ object.company_id.name } - Tel.: ${ object.company_id.phone }</p>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>

        ]]></field>
        </record>

        <!--Default Notification Email template for invoices-->
        <record id="sale.mail_template_data_notification_email_sale_order" model="mail.template">
            <field name="name">Sales Order Notification Email</field>
            <field name="subject">${object.subject}</field>
            <field name="model_id" ref="mail.model_mail_message"/>
            <field name="auto_delete" eval="True"/>
            <field name="body_html"><![CDATA[
                % set record = ctx.get('record')
                % set company = record and record.company_id or user.company_id
                <table cellspacing="0" cellpadding="0" width="100%" style="font-family: 'Helvetica'; background-color: #EEE; color:#666666; border-collapse: collapse;" summary="o_mail_notification">
                    <tr>
                        <td valign="top" align="center">
                            <table cellspacing="0" cellpadding="0" width="600" style="margin: 0 auto; width: 600px;">
                                <tr>
                                    <td>
                                        <!-- Header -->
                                        <table cellspacing="0" cellpadding="0" width="100%">
                                            <tr>
                                                <td valign="middle" align="left" style="padding:15px">
                                                    % if object.company_id.name:
                                                        <img src="/web/image?model=res.company&field=logo&id=${object.company_id.id}"  style="max-width:100px;" />
                                                    % else:
                                                        <span style="font-size:12px;color:#AAAAAA">${ object.company_id.name },</span>
                                                    % endif
                                                </td>
                                            </tr>
                                        </table>

                                        <!-- Content -->
                                        <table cellspacing="0" cellpadding="0" width="100%" bgcolor="#fff" style="background-color:#fff;">
                                            <tr>
                                                <td width="100%" style="padding: 15px;">
                                                    <table cellspacing="0" cellpadding="0" width="100%">
                                                        <tr>
                                                            <td style="margin-bottom: 30px;">
                                                                ${object.body | safe}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>

                                        <!-- Footer -->
                                        <table cellspacing="0" cellpadding="0" width="100%" style="padding: 15px;">
                                            <tr>
                                                <td align="center" style="padding: 30px 15px;">
                                                    <p style="font-size:12px;color:#AAAAAA">${ object.company_id.name } - ${ object.company_id.address }</p>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            ]]></field>
        </record>


    </data>
</odoo>
